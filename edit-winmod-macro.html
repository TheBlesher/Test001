<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
   <title>WinMOD Macro Editing</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Plugin css -->
  <link href="assets/css/plugins/bootstrap.min.css" rel="stylesheet">
  <link href="assets/css/plugins/slick.css" rel="stylesheet">
  <link href="assets/css/plugins/ion.rangeSlider.min.css" rel="stylesheet">
  <link href="assets/css/plugins/magnific-popup.css" rel="stylesheet">
  <link href="assets/fonts/flaticon/flaticon.css" rel="stylesheet">
  <link href="assets/fonts/font-awesome.min.css" rel="stylesheet">
  <!-- Main css -->
  <link href="assets/css/style.css" rel="stylesheet">
  <!-- Favicon -->
  <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">
</head>

<body class="btn-style-1 btn-rounded sidebar-style-2">
  <!--header Start-->
  <div id="section-header">
    <aside class="sigma_aside sigma_aside-desktop">
      <div class="sidebar">
       

    <!--Floating sidebar content-->

      </div>
    </aside>
    
    <div class="sigma_aside-overlay aside-trigger-right">
    </div>
    <div class="sigma_aside-overlay aside-trigger">
    </div>
    <header class="sigma_header style-3 can-sticky">
      <div class="sigma_header-middle">
        <div class="navbar">
          <div class="sigma_logo-wrapper">
            <a class="sigma_logo" href="index.html">
              <img src="assets/img/logo.png" alt="logo">
            </a>
          </div>
          
      
      
 <!--NAV bar-->
          <ul class="navbar-nav" id="Top">
            <li class="menu-item">
              <a href="index.html">Home</a>
            </li>
            
<li class="menu-item menu-item-has-children">
              <a href="intern-tutorial.html">Intern Tutorial</a>
              <ul class="sub-menu">
              
                <li class="menu-item">
                  <a href="hardware-prints.html">Hardware prints</a>
                </li>
                
                <li class="menu-item">
                  <a href="layout.html">Layout</a>
                </li>
                <li class="menu-item">
                  <a href="winmod-getstated.html">Start a WinMOD file</a>
                </li>
                <li class="menu-item">
                  <a href="generate-l5k.html">Generate L5K Sim files</a>
                </li>
                <li class="menu-item">
                  <a href="connect-plc.html">Connect to a PLC</a>
                </li>
                <li class="menu-item">
                  <a href="de-sim.html">De-Sim a L5K File</a>
                </li>
                <li class="menu-item menu-item-has-children">
                  <a href="common-issues.html">Common PLC/WinMOD issues</a>
                  <ul class="sub-menu">
                  <li class="menu-item">
                    <a href="common-issues.html#parts">Part Present</a>
                    </li>
                    <li class="menu-item">
                    <a href="common-issues.html#clamps">Clamp</a>
                    </li>
                     <li class="menu-item">
                    <a href="common-issues.html#robots">Robot</a>
                    </li>
                  </ul>
                </li>
                <li class="menu-item">
                  <a href="edit-winmod-macro.html">Edit a WinMOD Macro</a>
                </li>
                <li class="menu-item menu-item-has-children">
                  <a>CN150B01 Pictures</a>
                  <ul class="sub-menu">
                  <li class="menu-item">
                    <a href="pictures-devices.html">Devices</a>
                    </li>
                    <li class="menu-item">
                    <a href="pictures-cell.html">Cell Pictures</a>
                    </li>
                     <li class="menu-item">
                    <a href="pictures-more.html">More Pictures</a>
                    </li>
                  </ul>
                </li>
                </li>

                <li class="menu-item">
                  <a href="videos.html">Example Videos</a>
                </li>
                <li class="menu-item">
                  <a href="3dlayout.html" target="_blank">Layout 3D</a>
                </li>  
                  <li class="menu-item">
                  <a href="glossary.html" target="_blank">Glossary</a>
                </li> 
                
              </ul>
            </li>
           
           <li class="menu-item menu-item-has-children">
              <a href="softwares.html">Softwares</a>
              <ul class="sub-menu">
                <li class="menu-item menu-item-has-children">
                  <a>WinMOD</a>
                  <ul class="sub-menu">
                  
                    <li class="menu-item">
                    <a href="winmod-getstated.html">Start a WinMOD file</a>
                    </li>
                    
                    <li class="menu-item">
                    <a href="common-issues.html">Common PLC/WinMOD issues</a>
                    </li>
                    
                    <li class="menu-item">
                    <a href="edit-winmod-macro.html">Edit a WinMOD Macro</a>
                    </li>
                    <li class="menu-item">
                    <a href="winmod-helper.html">WinMOD Helper</a>
                    </li>
                  </ul>
                </li>
                    <li class="menu-item">
                    <a>Process Simulate</a>
                    </li>
                    <li class="menu-item">
                    <a>Emulate 3D</a>
                    </li>
              </ul>
            </li>
            
            <li class="menu-item menu-item-has-children">
              <a href="plc.html">PLC</a>
              <ul class="sub-menu">
                <li class="menu-item">
                  <a href="plc-references.html">References</a>
                </li>
                <li class="menu-item">
                  <a href="plc-fixes.html">Fixes</a>
                </li>
                <li class="menu-item">
                  <a href="connect-plc.html">Connect to a PLC</a>
                </li>
                <li class="menu-item">
                  <a href="generate-l5k.html">Generate L5K Sim files</a>
                </li>
                <li class="menu-item">
                  <a href="de-sim.html">De-Sim a L5K File</a>
                </li>
                <li class="menu-item">
                  <a href="common-issues.html">Common PLC/WinMOD issues</a>
                </li>
                <li class="menu-item">
                  <a href="gm-hmi.html">Download a GM's HMI</a>
                </li>
              </ul>
            </li>
            
            <li class="menu-item menu-item-has-children">
              <a href="utilities.html">Utilities</a>
              <ul class="sub-menu">
                <li class="menu-item">
                  <a href="sim-tools.html">SimTools</a>
                </li>
                <li class="menu-item">
                  <a href="note-tool.html">VCNoteTool</a>
                </li>
                <li class="menu-item">
                  <a href="paths.html">K Drive Paths</a>
                </li>
                <li class="menu-item">
                  <a href="winmod-helper.html">WinMOD Helper</a>
                </li>
                <li class="menu-item">
                  <a href="checklist-help.html">VC Checklist Help</a>
                </li>
              </ul>
            </li>
            
          </ul>
        <!--NAV bar END-->   
          
          
          <div class="sigma_header-controls style-2">
            <ul class="sigma_header-controls-inner">
              <li class="search-trigger header-controls-item d-none d-sm-block">
              </li>

              <li class="aside-toggle aside-trigger-right desktop-toggler">
                <span></span>
                <span></span>
                <span></span>
              </li>
              <li class="aside-toggle aside-trigger">
                <span></span>
                <span></span>
                <span></span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <!--header End-->
  </div>
  
  
  <!--subheader Start-->
  <div id="section-subheader">
    <div class="sigma_subheader style-10">
      <div class="container">
        <div class="sigma_subheader-inner">
          <h1>Editing a WinMOD macro</h1>
        </div>
      </div>
    </div>
    <!--subheader End-->
  </div>
  
  <!--services Start-->
  <div id="section-services">
    <div class="section section-padding sigma_service-sec">
      <div class="container">
      
      
       
        
                    
                    <h5>Let’s take as an example the robot macro, one of the most used ones.
                    <br>This is how it looks to us normally, but this is only the “outside face” of it, in here we have a graphical representation of the most important things of a robot, like the robot type, active segment, decision code, current style, etc.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\img01.png" alt="post" class="gallery-img25">
                    <br>
                    <h5>But how does this really work? The first thing you need to know is, there are outputs and inputs the robot receives from other macros, tags and even directly from or to the PLC. These inputs and outputs are operands that work with the insides of the macro to make it simulate a real robot. By double clicking on a macro, you can access its properties and from there you can see its inputs and outputs.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\01.gif" alt="post" class="gallery-img50">
                    <br>
                   <h5>In WinMOD we have local and global operands, local operands work within a project file and won’t be visible inside other project files. On the other hand, global operands are visible everywhere. When doing a macro all the operands are “local” in the sense that they will work within the macro, to make global operands or operands that can communicate with the exterior you need to set them up.
                    <br>Right click the macro and select “Edit Macro”, this will open the insides of the macro. Every tag created there will be local and work within the macro scope, to make them global you need to set them as inputs or outputs. Inputs are located on the left side column of the macro, and to transform a normal tag into an input you just need to drag and drop it in that area, the outputs are on the opposite side of the macro window.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\02.gif" alt="post" class="gallery-img75">
                    <br>
                    <h5>An input is a signal we receive from the outside, and an output is a signal we send to the outside. It might be confusing because the operands on the left side have an “O” and the operands in the right side have an “I”, but just remember that these operands are tag names that come and go directly to and from the PLC, for instance, a PLC output will be an input for us, and a PLC input will be an output from our side.
                    <br>Bear in mind that we have 3 different kinds of operands, PLC inputs, PLC outputs and process signals. Process signals are operands used exclusively on WinMOD whereas the other two are signals used on WinMOD and on the PLC. A blue operand icon means it is a process signal, a green one is a PLC input and a red one is a PLC output.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\03.gif" alt="post" class="gallery-img50">
                    <br>
                    <h5>As you can see, inside the macro we have an identical image as the one of the outside, this is the “control panel” in which inside components of the macro will be shown to the outside.
                    <br>One of the problems with the robot macro is that it only comes with 2 picks and 2 drops, this works almost all the time because usually a Material Handler robot will have one pick and one drop, but sometimes you will need a robot with 3, 4 or even 16 picks or drops. To achieve this, we need to modify the macro and test if it works. So, before we start doing any modifications let’s learn how to test the macro on its own.
                    <br>First start the simulation of the window, then force active the 6 signals on the middle of the robot, after activating all of them you should have MotorsON and Motion Enable ON. Now Force the Program number and set it to 12 (the style this robot runs), send the style by forcing and clicking “O.InitiateStyle” once. The robot should start and go to pounce. Once there check the decision codes, “O.DecCodes” is the current decision code the robot is receiving from the PLC, and Acptd Codes shows the accepted decision codes you can send, by forcing and activating the bits “O.DecisionCodeBitX” you can simulate the decision code being send by the PLC (it’s in binary so make sure to send the right one). Once the robot is at a RTC (request to continue, the robot is waiting on instructions) make sure to send the right DC and click on “O.PathSegContOK” to send the Ok to continue signal.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\04.gif" alt="post" class="gallery-img75">
                    <br>
                    <h5>This way you can simulate every change you make to the robot and be sure it will work during simulation.
                    <br>There are many ways to achieve our goal, if we just want to create one additional pick or drop, we can basically just copy the logic of one of them and rename everything accordingly, but if you happen to need several picks or drops another approach will be needed. In this tutorial we will do it the “easy” way, by basically cloning one pick. If you wonder how to do multiple drops or picks, one approach is to use a single pick/drop and trick the PLC by sending different segments, to do this you need to offset the segments by constantly adding to them depending on the decision code received. 
                    <br>The robot will work this way; it will go to pounce and once there it will wait for a DC (decision code), either 1, 2 or 3, if it receives 1 it will go to segment 10, if it receives 2 it will go to segment 14, but if it receives 3 it will go to segment 18 (per GM standard these are the segments used for the first 3 picks), it will wait at the end of segment (to check if it has picked the part properly), after receiving the DC (0) it will continue to segment 11/15/19 and then to segment 12/16/20, it will wait there for the ok to continue (dc 0) and then continue to drop and go back home.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\img02.png" alt="post" class="gallery-img75">
                    <br>
                    <h5>Being in a RTC means the robot is waiting at end of segment for a valid decision code to continue moving forward. 
                    <br>Let’s begin by understanding the pick logic, the first element on the pick is the State Element, when the previous is ON its time will begin to count, while it is counting the MoveToPick1.En will be on and once its done the MoveToPick1.DN will be on. This means that to begin the pick we need to met the previous conditions, in this case the robot needs to be configured as a MH, it needs to match Pounce’s DC(1) and TCActive should be OFF.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\img03.png" alt="post" class="gallery-img75">
                    <br>
                    <h5>Once the conditions are met and the timer has completed, it will be AtPick1. 
                    <br>Next comes a macro to stop at a repo, for it to work it needs to be configured to use Pick1 Repo, this means that the robot will have one additional segment in which it will stop and ask if the conditions for it to continue moving forward are met. 
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\img04.png" alt="post" class="gallery-img75">
                    <br>
                    <h5>The next state element has two ways to get activated, the first one is if we are using a repo and we have the ok to continue for that repo, and the second one is if we are not using the repo and we are at pick. Once the time is done it will activate the next macro for the Pick1 Part Check, this macro is the same as the one used for the repo, what this macro does is basically create a RTC to request a valid DC, if it is used the robot will wait there until the PLC allows it to continue. MoveToPick1 corresponds to segment 10, if you use the repo it will wait in the Pick1Repo macro, then go to segment 11 and wait on Pick1PartCheck and then continue to segment 12 and then 13 and wait there. But if you don’t use the repo, it will skip Pick1Repo and wait at Pick1PartCheck, then go to segment 11, 12 and wait there.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\img05.png" alt="post" class="gallery-img75">
                    <br>
                    <h5>The next state elements work the same way as the others, they basically time how much an action lasts and then continue to the next one. MoveToPick1ClrOfTool corresponds to segment 11 and MoveToPick1ClrOfSta corresponds to segment 12, as you can see to go from segment 11 to 12 there is nothing to make it wait, on the other hand, after segment 12 we have a macro that makes it wait for a decision code (the only difference between this macro and the smaller one is that this one can handle multiple decision codes and the other one just one, usually 0 because there are no more path options).
                    <br>Now that you have an idea of how it works let’s start cloning pick1 and turn it into pick3.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\05.gif" alt="post" class="gallery-img100">
                    <br>
                    <h5>Keep changing all the items that include Pick1 to Pick3, some of them might appear with no border, if this is the case you can always go to the element it connects properties and change it from there.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\img06.png" alt="post" class="gallery-img75">
                    <br>
                    <h5>Last time you tested the robot at pounce it was only accepting DC (0), this time we need to make it so it accepts DC (1,2 and 3), each for a different pick.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\06.gif" alt="post" class="gallery-img100">
                    <br>
                    <h5>After making these changes you should be able to simulate your robot again. Try going to DC(1) from ponce, once you are in segment 10 end of segment reset the robot and try going to DC(2) from ponce, once you are in segment 14 end of segment reset the robot and try going to DC(3) from pounce.
                    <br>Going to segment 14 should work but going to segment 18 it’s not going to work because the robot is not configured for it. To make it work you need to use a spare “Step” for the State elements on Pick3, this is because each state element should have its own step (this works as an identifier to know what state the macro is at).
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\img07.png" alt="post" class="gallery-img25">
                    <br>
                    <h5>Scroll from the top and look for “MAIN PROGRAM” and around there you will find this section that says what steps are already in use, as you can see, we have spares from step 91 to 299. To make it an easy change just add 100 to every state element on Pick3.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\07.gif" alt="post" class="gallery-img75">
                    <br>
                    <h5>Simulate the robot again and see what happens when trying to go to DC(3) from pounce. 
                    <br>As you can see, this time it was able to continue, but it won’t show anything on Active segment and Step Description, to make them work you need to make some modifications.
                    <br>First look for the Active Segment table below MAIN PROGRAM and add the right segment for the newly added state elements. State 120 should be segment 18, state 125 segment 18, state 129 segment 19 and state 130 segment 20.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\08.gif" alt="post" class="gallery-img75">
                    <br>
                    <h5>Simulate your robot once more and notice how this time it shows the Active Segment.
                    <br>Now double click Step Description’s Active Text and modify it by adding the newly added states.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\09.gif" alt="post" class="gallery-img50">
                    <br>
                    <h5>This time it shows both fields.
                    <br>Before you continue simulating the robot you need to set up the new decision code macros, to do that go to the CONFIGURATION section and look for the instructions on it.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\10.gif" alt="post" class="gallery-img75">
                    <br>
                    <h5>To finish it we need to configure what happens after the pick, this means going trough every pick and make them able to go to drop 1.
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\11.gif" alt="post" class="gallery-img75">
                    <br>
                    <h5>After these changes the robot should be able to go to each pick and then to drop 1, simulate your robot and test it. 
                    </h5>
                    <br>
                    <img src="assets\img\winmod\robotmacro\12.gif" alt="post" class="gallery-img50">
                    <br>
                    <h4 class="primary-color">IMPORTANT: Don’t forget to Un-force every bit you forced while simulating your robot or it won’t work properly during simulation.
                    </h4>
                
                    
                    
                    
        
        
        
        
      </div>
    </div>
    <!--services End-->
  </div>
  
<hr>

          <!--to-top Start-->
     <table class="footer_table">
  <tr>
    <td align="right"><a href="common-issues.html" class="sigma_btn">Previous</a></td>
    <td align="center"><a href="#Top" class="sigma_btn">Go Top</a></td>
    <td align="left"><a href="pictures-devices.html" class="sigma_btn">Next</a></td>
  </tr>
</table>
          <!--to-top End-->
  
  
  
  <!--footer Start-->
  <div id="section-footer">

    <footer class="sigma_footer sigma_footer-sec">

      <div class="container">
        <div class="sigma_footer-middle text-center">
          <div class="sigma_footer-logo">
            <img src="assets/img/logo.png" alt="logo">
          </div>
                <ul class="sigma_footer-links">
                <li>
                  <a href="index.html">Home</a>
                </li>
                <li>
                  <a href="intern-tutorial.html">Intern Tutorial</a>
                </li>
                <li>
                  <a href="softwares.html">Softwares</a>
                </li>
                <li>
                  <a href="plc.html">PLC</a>
                </li>
                <li>
                  <a href="utilities.html">Utilities</a>
                </li>
              </ul>


        </div>
      </div>
    </footer>
    <!--footer End-->
  </div>

  <!-- Javascript -->
  <script src="assets/js/plugins/jquery-3.4.1.min.js"></script>
  <script src="assets/js/plugins/popper.min.js"></script>
  <script src="assets/js/plugins/bootstrap.min.js"></script>
  <script src="assets/js/plugins/jquery.instagramFeed.min.js"></script>
  <script src="assets/js/plugins/slick.min.js"></script>
  <script src="assets/js/plugins/imagesloaded.min.js"></script>
  <script src="assets/js/plugins/isotope.pkgd.min.js"></script>
  <script src="assets/js/plugins/jquery.magnific-popup.min.js"></script>
  <script src="assets/js/plugins/jquery.counterup.min.js"></script>
  <script src="assets/js/plugins/jquery.inview.min.js"></script>
  <script src="assets/js/plugins/ion.rangeSlider.min.js"></script>
  <script src="assets/js/plugins/jquery.validate.min.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="assets/functions/mf_form.js"></script>
</body>

</html>